<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Play Scenario - Memory Shape Drawing Game</title>
  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href="manifest.json">
</head>
<body>
  <div class="practice-screen">
    <button onclick="window.location.href='scenarios.html'">‚Üê Back</button>
    <h2 id="scenarioTitle">Scenario</h2>
    <button id="startBtn">Start Challenge</button>
    <canvas id="gameCanvas" width="500" height="500"></canvas>
    <p class="score" id="result"></p>
    <div style="display:none">
      <input type="number" id="timeInput" value="5">
      <input type="number" id="bufferInput" value="1">
      <input type="number" id="challengeInput" value="10">
      <select id="sidesSelect">
        <option value="1">Point</option>
        <option value="2">Line Segment</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
      </select>
      <select id="sizeSelect">
        <option value="small">Small</option>
        <option value="medium">Medium</option>
        <option value="big">Big</option>
      </select>
      <select id="gridSelect">
        <option value="0">None</option>
        <option value="2">2x2</option>
        <option value="3">3x3</option>
        <option value="4">4x4</option>
      </select>
      <input type="checkbox" id="drawModeToggle" checked />
      <span id="drawModeLabel"></span>
      <input type="checkbox" id="giveHighest">
      <input type="checkbox" id="giveLowest">
      <input type="checkbox" id="giveLeftmost">
      <input type="checkbox" id="giveRightmost">
      <select id="afterSelect">
        <option value="next">Next Shape</option>
        <option value="repeat">Repeat Until Threshold</option>
        <option value="end">End Scenario</option>
      </select>
      <input type="number" id="thresholdPoints" value="1">
      <select id="thresholdGrade">
        <option value="green">Green</option>
        <option value="yellow">Yellow</option>
      </select>
      <span id="thresholdWrapper"></span>
    </div>
  </div>
  <script src="app.js"></script>
  <script src="scenario.js"></script>
  <script src="scenarios.js"></script>
  <script>
    const params = new URLSearchParams(window.location.search);
    const name = params.get('name') || '';
    document.getElementById('scenarioTitle').textContent = name || 'Scenario';
    const scn = getScenario(name);
    const startBtn = document.getElementById('startBtn');
    if (!scn) {
      document.getElementById('result').textContent = 'Scenario not found.';
      startBtn.disabled = true;
    } else {
      document.getElementById('timeInput').value = scn.time;
      document.getElementById('bufferInput').value = scn.buffer;
      document.getElementById('challengeInput').value = scn.challenge;
      document.getElementById('sidesSelect').value = scn.sides;
      document.getElementById('sizeSelect').value = scn.size;
      document.getElementById('gridSelect').value = scn.grid;
      document.getElementById('drawModeToggle').checked = scn.drawMode;
      document.getElementById('drawModeLabel').textContent = scn.drawMode ? 'Point-to-Point' : 'Freehand';
      document.getElementById('giveHighest').checked = scn.giveHighest;
      document.getElementById('giveLowest').checked = scn.giveLowest;
      document.getElementById('giveLeftmost').checked = scn.giveLeftmost;
      document.getElementById('giveRightmost').checked = scn.giveRightmost;
      document.getElementById('afterSelect').value = scn.afterAction || 'end';
      document.getElementById('thresholdPoints').value = scn.thresholdPoints || 1;
      document.getElementById('thresholdGrade').value = scn.thresholdGrade || 'green';
      toggleThreshold();
    }
    startBtn.addEventListener('click', () => {
      result.textContent = '';
      startScenario();
    });
  </script>
</body>
</html>
